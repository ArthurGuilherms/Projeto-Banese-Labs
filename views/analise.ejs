<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Banese Credit Insights</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles/main.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="icon" href="/images/banese-logo-3d.png" type="image/png">
</head>

<body>
  <header class="navbar">
    <nav>
      <ul class="logo-container">
        <li>
          <img src="images/logo.banese.white_.vertical.svg" alt="Banco Banese" class="logo-banese">
        </li>
        <li>
          <div class="logo"> Credit Insights</div>
        </li>
      </ul>
    </nav>
    <nav>
      <ul>
        <li><a href="/">Empresas</a></li>
        <li><a href="#" class="active">Análises</a></li>
      </ul>
    </nav>
    <div class="perfil">
      <div class="notification-icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
          <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
        </svg>
      </div>
      <div class="avatar"></div>
    </div>
  </header>

  <main class="container" data-empresa-id="<%= empresa.id %>">
    <h1>Análise de Crédito da Empresa</h1>

    <div class="layout-container">

      <div class="coluna-principal">
        <section class="card-empresa">
          <div class="empresa-logo">
            <span>COMPANY</span>
          </div>
          <div class="empresa-info">
            <h2>
              <%= empresa.empresa %>
            </h2>
            <p>Setor: <%= empresa.setor %>
            </p>
            <p>ID: <%= empresa.id %>
            </p>

            <p>Status: <span id="status-empresa" class="status-<%= empresa.status.toLowerCase().replace(' ', '-') %>">
                <%= empresa.status %>
              </span></p>

          </div>
        </section>

        <section class="card card-financeiro">
          <h3>Dados Financeiros</h3>
          <div class="dados-grid">
            <div class="dado-item">
              <span>Receita Anual</span>
              <p>R$ <%= new Intl.NumberFormat('pt-BR', { minimumFractionDigits: 2 }).format(empresa.receita_anual) %>
              </p>
            </div>
            <div class="dado-item">
              <span>Dívida Total</span>
              <p>R$ <%= new Intl.NumberFormat('pt-BR', { minimumFractionDigits: 2 }).format(empresa.divida_total) %>
              </p>
            </div>
            <div class="dado-item">
              <span>Prazo de Pagamento</span>
              <p>
                <%= empresa.prazo_pagamento %> meses
              </p>
            </div>
            <div class="dado-item">
              <span>Rating</span>
              <p class="rating">
                <%= empresa.rating %>
              </p>
            </div>
          </div>
        </section>

        <section class="card card-ia">
          <h3>Análise e Recomendação da IA <button class="btn-refresh" aria-label="Atualizar">
              <i class="fa-solid fa-rotate-right"></i>
            </button></h3>
          <div id="analise-container">
            <div class="loading-dots">
              <span></span>
              <span></span>
              <span></span>
            </div>
            <p style="margin-top: 10px;">Analisando dados, por favor aguarde...</p>
          </div>
        </section>

        <section class="card card-noticias">
          <h3>Notícias Recentes</h3>
          <ul>
            <li>
              <span class="data-noticia">01/07/2024</span>
              <p class="rating">
                <%= empresa.noticias_recentes %>
              </p>
            </li>
          </ul>
        </section>
      </div>

      <div class="coluna-lateral">
        <section class="card card-simulacao">
          <h3 style="display: flex; align-items: center; gap: 0.5rem;">
            Simulação de Crédito
            <button class="btn-refresh btn-refresh-simulacao" aria-label="Atualizar">
              <i class="fa-solid fa-rotate-right"></i>
            </button>
          </h3>
          <div id="sugestao-container" style="margin-bottom: 1rem; font-size: 0.9em; text-align: center;"></div>

          <div class="form-group">
            <label for="valor">Valor do Crédito</label>
            <input id="valor" type="text" placeholder="Aguardando sugestão...">
          </div>
          <div class="form-group">
            <label for="taxa">Taxa de Juros</label>
            <input id="taxa" type="text" placeholder="Aguardando sugestão...">
          </div>
          <div class="form-group">
            <label for="prazo">Prazo de Pagamento (meses)</label>
            <input id="prazo" type="number" placeholder="Aguardando sugestão...">
          </div>

          <div class="justificativa-container">
            <a id="justificativa-toggle" style="display: none;">Ver a explicação da IA</a>
            <div id="justificativa-content" style="display: none;"></div>
          </div>

          <button id="btn-simular" class="btn-aprovar" style="margin-top: 1rem;">Simular</button>
          <div id="resultado-simulacao" style="margin-top: 1rem; color: #4CAF50;"></div>
        </section>

        <section class="card card-decisao">
          <h3>Decisão Final</h3>
          <div id="decisao-erro" class="erro-simulacao" style="display: none;">
            * Por favor, realize uma simulação primeiro.
          </div>
          <div class="botoes-acao">
            <button id="btn-aprovar-final" class="btn-aprovar">Aprovar Crédito</button>
            <button id="btn-rejeitar-final" class="btn-rejeitar">Rejeitar Crédito</button>
          </div>
        </section>
      </div>

    </div>

    <div id="modal-confirmacao" class="modal-overlay" style="display: none;">
      <div class="modal-content">
        <h3>Confirmar Aprovação de Crédito</h3>
        <p>Deseja aprovar o crédito com os seguintes valores?</p>
        <div id="modal-valores">
        </div>
        <div class="modal-botoes">
          <button id="modal-btn-sim" class="btn-aprovar">Sim, Aprovar</button>
          <button id="modal-btn-nao" class="btn-rejeitar">Não, Cancelar</button>
        </div>
      </div>
    </div>
  </main>

  <script src="/scripts/analise.js" defer></script>
</body>

</html>